"use strict";(self.webpackChunkosti_store=self.webpackChunkosti_store||[]).push([[223],{9569:(e,i,s)=>{s.d(i,{Z:()=>n});var t=s(7704),r=s(4486),c=s(4860),a=s(2791),o=s(1087),d=s(184);function n(e){let{id:i,price:s,title:n,image:l,product:u}=e;const{isLiked:m,toggleIsLiked:k}=(0,c.f)(i),{isTelegramShareEnabled:p}=(0,a.useContext)(t.p),{isLogin:v}=(0,r.JL)(),h=m?"card__like-active":"",_=(0,a.useCallback)((()=>{const e="https://t.me/share/url?url=".concat(encodeURIComponent("".concat(window.location.href,"product/").concat(i)),"&text=").concat(encodeURIComponent(n));window.open(e,"_blank")}),[n,i]);return(0,d.jsxs)("div",{className:"card",children:[(0,d.jsxs)(o.rU,{to:"/product/".concat(u.id),className:"card__link",role:"link",children:[(0,d.jsx)("img",{className:"card__img",src:l,alt:n}),(0,d.jsx)("h3",{className:"card__title",children:n})]}),(0,d.jsxs)("div",{className:"card__description",children:[(0,d.jsxs)("p",{className:"card__price",children:[s,"$"]}),v&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:()=>{k(u)},type:"submit",className:"card__like ".concat(h)}),p&&(0,d.jsx)("button",{onClick:_,type:"submit",className:"card__share",children:"share"})]})]})]})}},4860:(e,i,s)=>{s.d(i,{d:()=>n,f:()=>d});var t=s(2481),r=s(5217),c=s(7689),a=s(2791),o=s(5660);const d=e=>{const i=(0,r.C)((e=>e.auth.user)),s=(0,c.s0)(),[d,n]=(0,a.useState)(!1);(0,a.useEffect)((()=>{if(!i||!e)return;const s=(0,t.cf)((0,t.JU)(o.db,"users",i.uid),(i=>{const s=i.data();s&&s.bookmarks&&n(s.bookmarks.some((i=>i.id===e)))}));return()=>{s()}}),[i,e]);return{isLiked:d,toggleIsLiked:async e=>{if(!i)return void s("/login");const r=(0,t.JU)(o.db,"users",i.uid);try{await(0,t.pl)(r,{},{merge:!0});const i={id:null===e||void 0===e?void 0:e.id,title:null===e||void 0===e?void 0:e.title,price:null===e||void 0===e?void 0:e.price,image:null===e||void 0===e?void 0:e.image,description:null===e||void 0===e?void 0:e.description};await(0,t.r7)(r,{bookmarks:d?(0,t.Ab)(i):(0,t.vr)(i)}),n(!d)}catch(c){console.error("Error toggling like:",c)}}}},n=()=>{const e=(0,r.C)((e=>e.auth.user)),[i,s]=(0,a.useState)([]);return(0,a.useEffect)((()=>{if(!e)return;const i=(0,t.cf)((0,t.JU)(o.db,"users",null===e||void 0===e?void 0:e.uid),(e=>{var i;s(null===(i=e.data())||void 0===i?void 0:i.bookmarks.slice())}),(e=>{alert(e),s([])}));return()=>i()}),[e]),{likedProducts:i}}},2223:(e,i,s)=>{s.r(i),s.d(i,{default:()=>o});var t=s(9569),r=s(7466),c=s(9280),a=(s(2791),s(184));const o=()=>{const{data:e,isLoading:i}=(0,c.C$)();return i?(0,a.jsx)(r.Z,{}):(0,a.jsx)("ul",{className:"cards",children:null===e||void 0===e?void 0:e.map((e=>(0,a.jsx)("li",{className:"cards__item",children:(0,a.jsx)(t.Z,{id:e.id,title:e.title,price:e.price,image:e.image,product:e},e.id)},e.id)))})}}}]);
//# sourceMappingURL=223.c2ba0965.chunk.js.map