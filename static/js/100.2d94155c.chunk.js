"use strict";(self.webpackChunkosti_store=self.webpackChunkosti_store||[]).push([[100],{9714:(e,t,r)=>{r.d(t,{F_:()=>o,Rh:()=>u,xt:()=>l});var s=r(2481),n=r(2791),i=r(8011),c=r(5660);const o=(e,t)=>{(0,n.useEffect)((()=>{const r=(0,i.Aj)(c.I,(s=>{if(e(s),s){const e=a(t);return()=>{r(),e&&e()}}}));return r}),[t])},a=e=>{const t=c.I.currentUser;if(!t)return;const r=(0,s.hJ)(c.db,"searchHistory"),n=(0,s.IO)(r,(0,s.ar)("userId","==",t.uid));return(0,s.cf)(n,(t=>{const r=t.docs.map((e=>({id:e.id,query:e.data().query,url:e.data().url||""})));e(r)}))},u=async e=>{const t=c.I.currentUser;if(!t)return;const r=(0,s.hJ)(c.db,"searchHistory"),n=encodeURIComponent(e),i={query:e,userId:t.uid,url:"".concat(n)};try{await(0,s.ET)(r,i)}catch(o){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043f\u043e\u0438\u0441\u043a\u0430:",o)}},l=async e=>{if(!c.I.currentUser)return;const t=(0,s.JU)(c.db,"searchHistory",e);try{await(0,s.oe)(t)}catch(r){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0438\u0437 \u0438\u0441\u0442\u043e\u0440\u0438\u0438 \u043f\u043e\u0438\u0441\u043a\u0430:",r)}}},100:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var s=r(9714),n=r(7466),i=r(9280),c=r(770),o=r(2791),a=r(184);function u(){const[e,t]=(0,o.useState)([]),[,r]=(0,o.useState)(null),{isLoading:u}=(0,i.C$)();(0,s.F_)(r,t);return u?(0,a.jsx)(n.Z,{}):e.length>=1?(0,a.jsx)("section",{className:"history",children:(0,a.jsx)(c.t7,{width:1400,height:550,itemCount:e.length,itemSize:45,style:{position:"initial",width:"100%",height:"100%",willChange:"initial"},children:r=>{let{index:n}=r;return(0,a.jsxs)("li",{className:"history__item",children:[(0,a.jsx)("a",{className:"history__link",href:"/search?query=".concat(e[n].query),children:e[n].query}),(0,a.jsx)("button",{className:"history__del",type:"button",onClick:()=>{return r=e[n].id,(0,s.xt)(r),void t((e=>e.filter((e=>e.id!==r))));var r},children:"Delete"})]},e[n].id)}})}):(0,a.jsx)("div",{className:"not-found",children:(0,a.jsx)("h3",{className:"not-found__message",children:"Nothing was found"})})}}}]);
//# sourceMappingURL=100.2d94155c.chunk.js.map