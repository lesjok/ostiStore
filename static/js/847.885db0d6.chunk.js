"use strict";(self.webpackChunkosti_store=self.webpackChunkosti_store||[]).push([[847],{9569:(e,s,i)=>{i.d(s,{Z:()=>n});var t=i(7704),r=i(4486),c=i(4860),o=i(2791),a=i(1087),d=i(184);function n(e){let{id:s,price:i,title:n,image:l,product:u}=e;const{isLiked:m,toggleIsLiked:h}=(0,c.f)(s),{isTelegramShareEnabled:k}=(0,o.useContext)(t.p),{isLogin:p}=(0,r.JL)(),v=m?"card__like-active":"",g=(0,o.useCallback)((()=>{const e="https://t.me/share/url?url=".concat(encodeURIComponent("".concat(window.location.href,"product/").concat(s)),"&text=").concat(encodeURIComponent(n));window.open(e,"_blank")}),[n,s]);return(0,d.jsxs)("div",{className:"card",children:[(0,d.jsxs)(a.rU,{to:"/product/".concat(u.id),className:"card__link",role:"link",children:[(0,d.jsx)("img",{className:"card__img",src:l,alt:n}),(0,d.jsx)("h3",{className:"card__title",children:n})]}),(0,d.jsxs)("div",{className:"card__description",children:[(0,d.jsxs)("p",{className:"card__price",children:[i,"$"]}),p&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:()=>{h(u)},type:"submit",className:"card__like ".concat(v)}),k&&(0,d.jsx)("button",{onClick:g,type:"submit",className:"card__share",children:"share"})]})]})]})}},4860:(e,s,i)=>{i.d(s,{d:()=>n,f:()=>d});var t=i(2481),r=i(5217),c=i(7689),o=i(2791),a=i(5660);const d=e=>{const s=(0,r.C)((e=>e.auth.user)),i=(0,c.s0)(),[d,n]=(0,o.useState)(!1);(0,o.useEffect)((()=>{if(!s||!e)return;const i=(0,t.cf)((0,t.JU)(a.db,"users",s.uid),(s=>{const i=s.data();i&&i.bookmarks&&n(i.bookmarks.some((s=>s.id===e)))}));return()=>{i()}}),[s,e]);return{isLiked:d,toggleIsLiked:async e=>{if(!s)return void i("/login");const r=(0,t.JU)(a.db,"users",s.uid);try{await(0,t.pl)(r,{},{merge:!0});const s={id:null===e||void 0===e?void 0:e.id,title:null===e||void 0===e?void 0:e.title,price:null===e||void 0===e?void 0:e.price,image:null===e||void 0===e?void 0:e.image,description:null===e||void 0===e?void 0:e.description};await(0,t.r7)(r,{bookmarks:d?(0,t.Ab)(s):(0,t.vr)(s)}),n(!d)}catch(c){console.error("Error toggling like:",c)}}}},n=()=>{const e=(0,r.C)((e=>e.auth.user)),[s,i]=(0,o.useState)([]);return(0,o.useEffect)((()=>{if(!e)return;const s=(0,t.cf)((0,t.JU)(a.db,"users",null===e||void 0===e?void 0:e.uid),(e=>{var s;i(null===(s=e.data())||void 0===s?void 0:s.bookmarks.slice())}),(e=>{alert(e),i([])}));return()=>s()}),[e]),{likedProducts:s}}},7847:(e,s,i)=>{i.r(s),i.d(s,{default:()=>d});var t=i(4860),r=i(9569),c=i(7466),o=i(9280),a=(i(9712),i(2791),i(184));const d=()=>{const{likedProducts:e}=(0,t.d)(),{isLoading:s}=(0,o.C$)();return s?(0,a.jsx)(c.Z,{}):e.length>=1?(0,a.jsx)("ul",{className:"cards",children:null===e||void 0===e?void 0:e.map((e=>(0,a.jsx)("li",{className:"cards__item",children:(0,a.jsx)(r.Z,{id:e.id,title:e.title,price:e.price,image:e.image,product:e},e.id)},e.id)))}):(0,a.jsx)("div",{className:"not-found",children:(0,a.jsx)("h3",{className:"not-found__message",children:"Nothing was found"})})}},9712:()=>{}}]);
//# sourceMappingURL=847.885db0d6.chunk.js.map