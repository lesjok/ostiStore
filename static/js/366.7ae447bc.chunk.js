"use strict";(self.webpackChunkosti_store=self.webpackChunkosti_store||[]).push([[366],{4860:(e,i,s)=>{s.d(i,{d:()=>a,f:()=>l});var t=s(2481),r=s(5217),o=s(7689),d=s(2791),c=s(5660);const l=e=>{const i=(0,r.C)((e=>e.auth.user)),s=(0,o.s0)(),[l,a]=(0,d.useState)(!1);(0,d.useEffect)((()=>{if(!i||!e)return;const s=(0,t.cf)((0,t.JU)(c.db,"users",i.uid),(i=>{const s=i.data();s&&s.bookmarks&&a(s.bookmarks.some((i=>i.id===e)))}));return()=>{s()}}),[i,e]);return{isLiked:l,toggleIsLiked:async e=>{if(!i)return void s("/login");const r=(0,t.JU)(c.db,"users",i.uid);try{await(0,t.pl)(r,{},{merge:!0});const i={id:null===e||void 0===e?void 0:e.id,title:null===e||void 0===e?void 0:e.title,price:null===e||void 0===e?void 0:e.price,image:null===e||void 0===e?void 0:e.image,description:null===e||void 0===e?void 0:e.description};await(0,t.r7)(r,{bookmarks:l?(0,t.Ab)(i):(0,t.vr)(i)}),a(!l)}catch(o){console.error("Error toggling like:",o)}}}},a=()=>{const e=(0,r.C)((e=>e.auth.user)),[i,s]=(0,d.useState)([]);return(0,d.useEffect)((()=>{if(!e)return;const i=(0,t.cf)((0,t.JU)(c.db,"users",null===e||void 0===e?void 0:e.uid),(e=>{var i;s(null===(i=e.data())||void 0===i?void 0:i.bookmarks.slice())}),(e=>{alert(e),s([])}));return()=>i()}),[e]),{likedProducts:i}}},4366:(e,i,s)=>{s.r(i),s.d(i,{default:()=>l});var t=s(4486),r=s(4860),o=s(9280),d=s(7689),c=(s(2791),s(184));const l=()=>{const{id:e}=(0,d.UO)(),{data:i}=(0,o.K9)(Number(e)),{isLogin:s}=(0,t.JL)(),{isLiked:l,toggleIsLiked:a}=(0,r.f)(Number(e)),n=l?"card__like-active":"";if(!i)return null;return(0,c.jsxs)("section",{className:"product",children:[(0,c.jsx)("img",{src:i.image,alt:i.title,className:"product__img"}),(0,c.jsxs)("div",{className:"product__details",children:[(0,c.jsx)("h1",{className:"product__title",children:i.title}),(0,c.jsxs)("h3",{className:"product__price",children:[i.price,"$"]}),(0,c.jsx)("div",{className:"product__description",children:i.description}),s&&(0,c.jsx)("button",{type:"submit",onClick:()=>{a(i)},className:"card__like ".concat(n)})]})]})}}}]);
//# sourceMappingURL=366.7ae447bc.chunk.js.map